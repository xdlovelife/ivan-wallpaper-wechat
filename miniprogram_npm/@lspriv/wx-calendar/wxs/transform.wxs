var n=function(e){return null!=e};var s=function(e,t){var a=t.selectAllComponents(".wc__panel-container--incurrent");for(var n=0;n<a.length;n++){var r=a[n];var s="week"===e?r.getDataset().offset:0;r.setStyle({transition:"unset",transform:"translateY("+-s+"px)"})}};var c=function(e,t,a,n=!0){t="week"===e?t.min:"month"===e?t.main:t.max;n=!0===n?"all .28s ease":n||"unset",a.selectComponent("#panel").setStyle({transition:n,height:t+"px"});t=a.selectComponent(".wc__panel-container--current");var r="week"===e?t.getDataset().offset:0;t.setStyle({transition:n,transform:"translateY("+-r+"px)"}),s(e,a)};var l=function(e,t,a="unset",n=!1){n=n?"":".wc__panel-container--current ";n+=".wc__panel-schedules";var r=e.selectAllComponents(n);for(var s=0;s<r.length;s++)r[s].setStyle({transition:a,opacity:t})};var i=1;var h=2;var r=function(e){var t=e.selectAllComponents(".wc__panel-week--next");for(var a=0;a<t.length;a++)t[a].addClass("wc__panel-week--show")};var m=function(e){var t=e.selectAllComponents(".wc__panel-week--show");for(var a=0;a<t.length;a++)t[a].removeClass("wc__panel-week--show")};var e=function(e,t){var a=e.mark;var n=t.getState();a.gesture&&(n.y=e.changedTouches[0].pageY,n.deg=0,n.lastTime=e.timeStamp,n.lastX=e.changedTouches[0].pageX,n.lastY=n.y,n.check=0,"week"===a.view&&(n.currentHeight=a.min,r(t)),"month"===a.view&&(n.currentHeight=a.main),"schedule"===a.view)&&(n.currentHeight=a.max)};var t=function(e,t){var a=e.mark;if(a.gesture){var n=t.getState();if(!(n.check&h)){if(!n.check){var r=Math.abs(e.changedTouches[0].pageX-n.lastX);var s=Math.abs(e.changedTouches[0].pageY-n.lastY);if(s<r)return void(n.check=h);n.check=i}s=e.changedTouches[0].pageY-n.y;n.vy=(e.changedTouches[0].pageY-n.lastY)/(e.timeStamp-n.time),n.lastY=e.changedTouches[0].pageY,n.time=e.timeStamp;r=Math.floor(Math.min(a.dragMax,Math.max(a.min,n.currentHeight+4*s/5)));r=r==a.min||r==a.main||r==a.max?s<0?r-1:r+1:r,t.selectComponent("#panel").setStyle({transition:"unset",height:r+"px"});e=t.selectComponent(".wc__panel-container--current");var o=e.getDataset().offset;o=r>=a.main?0:o*(a.main-r)/(a.main-a.min);e.setStyle({transition:"unset",transform:"translateY("+-o+"px)"});e=0<s?"0.5":"-0.5";o=+e+n.deg;s=Math.max(-20,Math.min(o,20));n.deg=s,t.selectComponent("#control_1").setStyle({transition:"unset",transform:"rotate("+s+"deg)"}),t.selectComponent("#control_2").setStyle({transition:"unset",transform:"rotate("+-s+"deg)"});e=Math.max(0,Math.min(60,60*(a.main-r)/(a.main-a.min)));o=Math.max(52-e,8);n=Math.max(e-8,8);t.selectComponent("#view_bar").setStyle({transition:"unset",transform:"translateX("+e+"rpx) translateZ(0px)"}),t.selectComponent("#view_bar_1").setStyle({transition:"unset",width:o+"rpx"}),t.selectComponent("#view_bar_2").setStyle({transition:"unset",width:n+"rpx"}),r>a.main&&(s=Math.max(0,Math.min(1,(r-a.main)/(a.max-a.main))),l(t,s,"unset",!0))}}};var a=function(e,t){var a=e.mark;var n,r,s,o,i;a.gesture&&(s=t.getState(),!s.check||s.check&h||(e=e.changedTouches[0].pageY-s.y,i=Math.min(a.dragMax,Math.max(a.min,s.currentHeight+e)),n=a.min,n="week"===a.view?n<e?"month":"week":"schedule"===a.view?-n<e?"schedule":"month":e<-n?"week":n<e?"schedule":"month",e="week"===n,r="schedule"===n,o=e?a.min:r?a.max:a.main,o=Math.min(300,Math.abs((o-i)/s.vy)),i=o<160?"cubic-bezier(0.77, 1.36, 0.82, 1)":"cubic-bezier(0.61, 1, 0.88, 1)",c(n,a,t,"all .3s "+i),t.selectComponent("#control_1").setStyle({transition:"all .3s ease",transform:"rotate(0deg)"}),t.selectComponent("#control_2").setStyle({transition:"all .3s ease",transform:"rotate(0deg)"}),s=e?"var(--wc-operator-side)":0,o=e?0:"calc(var(--wc-operator-side) - var(--wc-operator-padding))",a=e?"calc(var(--wc-operator-side) - var(--wc-operator-padding))":0,t.selectComponent("#view_bar").setStyle({transition:"all .3s ease",transform:"translateX("+s+") translateZ(0px)"}),t.selectComponent("#view_bar_1").setStyle({transition:"all .3s ease",width:o}),t.selectComponent("#view_bar_2").setStyle({transition:"all .3s ease",width:a}),i=r?1:0,l(t,i,"all .3s ease"),"week"===n&&m(t),t.callMethod("refreshView",{view:e?1:r?4:2})))};var o=function(e,t,a,n){n=n.getDataset().view;if("week"===n&&e){var r=a.selectAllComponents(".wc__panel-container");for(var s=0;s<r.length;s++){var o=r[s];var i=o.getDataset().offset;o.setStyle({transition:"unset",transform:"translateY("+-i+"px)"})}}};var w=function(e,t){var a="var(--wc-operator-padding)";var n="calc(var(--wc-operator-side) - var(--wc-operator-padding))";t.selectComponent("#view_bar_1").setStyle({width:"week"===e?a:n}),t.selectComponent("#view_bar_2").setStyle({width:"week"===e?n:a});n="week"===e?"var(--wc-operator-side)":0;t.selectComponent("#view_bar").setStyle({transform:"translateX("+n+") translateZ(0px)"})};var v=function(e,t,a){var n;e&&e!==t&&(t=a.selectComponent(".wc"),n="wc--"+e,t.hasClass(n)||(t.hasClass("wc--week")&&t.removeClass("wc--week"),t.hasClass("wc--month")&&t.removeClass("wc--month"),t.hasClass("wc--schedule")&&t.removeClass("wc--schedule"),t.addClass(n)),w(e,a))};var p=function(e,t){e=e.mark;var a="week"===e.view?"month":"week";var n="week"==a;n=n?1:2;c(a,e,t),w(a,t),t.callMethod("refreshView",{view:n})};var d=function(e,t,a){n(e)&&(e?(a.selectComponent(".wc__header").addClass("wc__header--hidden"),a.selectComponent(".wc__bar").addClass("wc__bar--hidden")):(a.selectComponent(".wc__header").removeClass("wc__header--hidden"),a.selectComponent(".wc__bar").removeClass("wc__bar--hidden")))};var u=function(e,t,a,n){e&&(n=n.getDataset(),c(e,n,a,!1),n="schedule"===e?1:0,l(a,n,"unset"))};var g=function(e,t,a,n){e&&(n=n.getDataset(),c(e,n,a),v(e,t,a),a.callMethod("refreshView",{view:"week"===e?1:"month"===e?2:4}))};module.exports={touchStart:e,touchMove:t,touchEnd:a,toggleView:p,viewChange:v,offsetChange:o,updateAnuualCls:d,initViewChange:u,transViewChange:g};